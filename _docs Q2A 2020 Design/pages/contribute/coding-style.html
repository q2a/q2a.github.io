
<!doctype html>

<html class="no-js" lang="en">

<head>
	
	<meta http-equiv="content-type" content="text/html; charset=UTF-8">
	
	<!-- Disable screen scaling-->
	<meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1, maximum-scale=1, user-scalable=0"/>

	<!-- Page Title Here -->
	<title>Coding Style (Contribute) - Question2Answer</title>
	<meta name="description" content=="Accessing Question2Answer from external PHP code"/>
	<link rel="canonical" href="https://docs.question2answer.org/pages/contribute/coding-style/"/>
	
	<!-- Favicons -->
	<link href="../../images/branding/q2a_96px.png" rel="apple-touch-icon" sizes="96x96" type="image/png">
	<link href="../../images/branding/q2a_96px.png" rel="icon" sizes="96x96" type="image/png">
	<link href="../../images/branding/favicon.ico" rel="icon" sizes="16x16" type="image/ico">

	<!-- Fonts -->
	<link href="https://fonts.googleapis.com/css?family=Roboto:400,500,700&display=swap" rel="stylesheet">
	<link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
  
	<!-- Main CSS files -->
	<link rel="stylesheet" href="../../css/styles.css"/>
	<link rel="stylesheet" href="../../css/highlight.css">

	<!-- JS files -->
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>

</head>

<body id="body" class="page">

	<!-- Top Bar -->
	<div id="topBar" class="topBar">
		<div class="topBar-wrapper flex-row">
			<div class="flex-item not-flex-middle">
				<div id="navTrigger" class="material-icons mobile-only">menu</div>
				<a href="https://heliochun.github.io/q2adocs" class="topBarLogo">
					<img src="../../images/branding/question2answer-logo-350x40.png" class="logo-img normal-logo" />
					<img src="../../images/branding/question2answer-logo-white-350x40.png" class="logo-img white-logo" />
				</a>
			</div>
			<div id="mobileNav" class="flex-item flex-middle">
				<nav class="main-nav">
					<ul class="nav">
						<li>
							<span class="nav-item">Documentation <span class="material-icons">arrow_drop_down</span> </span>
							<ul class="sub-nav display-none">
								<li><a href="https://docs.question2answer.org/pages/documentation/install" class="sub-nav-item">Install</a></li>
								<li><a href="https://docs.question2answer.org/pages/documentation/themes" class="sub-nav-item">Themes</a></li>
								<li><a href="https://docs.question2answer.org/pages/documentation/plugins" class="sub-nav-item">Plugins</a></li>
								<li><a href="https://docs.question2answer.org/pages/documentation/code" class="sub-nav-item">Code</a></li>
							</ul>
						</li>
						<li><a href="https://docs.question2answer.org/pages/contribute" class="nav-item selected-nav">Contribute</a></li>
						<li><a href="https://docs.question2answer.org/pages/translate" class="nav-item">Translate</a></li>
						<li>
							<span class="nav-item">Addons <span class="material-icons">arrow_drop_down</span> </span>
							<ul class="sub-nav display-none">
								<li><a href="https://docs.question2answer.org/pages/addons/themes" class="sub-nav-item">Themes</a></li>
								<li><a href="https://docs.question2answer.org/pages/addons/plugins/" class="sub-nav-item">Plugins</a></li>
								<li><a href="https://docs.question2answer.org/pages/addons/clients/" class="sub-nav-item">Clients</a></li>
								<li><a href="https://docs.question2answer.org/pages/addons/translations/" class="sub-nav-item">Translations</a></li>
							</ul>
						</li>
					</ul>
					<ul class="nav secondary-nav mobile-only">
						<li><a href="https://docs.question2answer.org/pages/services" class="nav-item">Services</a></li>
						<li><a href="https://docs.question2answer.org/pages/sites" class="nav-item">Sites</a></li>
						<li><a href="https://www.question2answer.org/qa" class="nav-item">Q&amp;A</a></li>
					</ul>
				</nav>
			</div>
			<div class="flex-item not-flex-middle not-mobile">
				<ul class="nav secondary-nav">
					<li><a href="https://docs.question2answer.org/pages/services" class="nav-item">Services</a></li>
					<li><a href="https://docs.question2answer.org/pages/sites" class="nav-item">Sites</a></li>
					<li><a href="https://www.question2answer.org/qa" class="nav-item">Q&amp;A</a></li>
				</ul>
			</div>
			<div id="darkPane"></div>
		</div>
	</div>
	
	<!-- Breadcrumbs -->
	<div class="breadcrumbs-container">
		<ul class="breadcrumbs">
			<li class="breadcrumb-item"><a href="https://docs.question2answer.org/pages/contribute">Contribute</a></li>
			<li class="breadcrumb-item"><a href="https://docs.question2answer.org/pages/contribute/coding-style">Coding Style</a></li>
		</ul>
	</div>

	<!-- Section -->
	<section class="article-container">
		<div class="page-container">
		
			<div class="main-content">
				<article class="page-article" itemscope>
				
					<div class="page-directory-navigation">
						<div id="current-dir-nav"></div>
						<ul class="page-sub-directories">
							<li class="page-sub-directory"><a href="https://docs.question2answer.org/pages/contribute/">Issues</a></li>
							<li class="page-sub-directory selected-nav"><a href="https://docs.question2answer.org/pages/contribute/coding-style">Coding Style</a></li>
							<li class="page-sub-directory"><a href="https://docs.question2answer.org/pages/contribute/unit-tests">Unit Tests</a></li>
							<li class="page-sub-directory"><a href="https://docs.question2answer.org/pages/contribute/docs">Docs</a></li>
						</ul>
					</div>
					
					<div class="article-content-container">
						<h1 id="question2answer-coding-style-guidelines">Question2Answer Coding Style guidelines</h1>

						<p>From 1.7 onwards a new coding style has been implemented that is more in line with other projects. All PHP code should use these guidelines:</p>

						<ul>
						  <li>PHP code should start with <code class="language-plaintext highlighter-rouge">&lt;?php</code> (almost always the very first line). The closing tag <code class="language-plaintext highlighter-rouge">?&gt;</code> should be omitted to avoid accidental output.</li>
						  <li>PHP files should use UTF-8 encoding without BOM (this is usually default in most text editors).</li>
						  <li>Trailing whitespace (tabs or spaces at the end of lines) should not be present. Any advanced text editor should be able to do this automatically when saving. (For Sublime Text you can add the option <code class="language-plaintext highlighter-rouge">"trim_trailing_white_space_on_save": true</code> to your preferences. In Notepad++ you can press Alt+Shift+S.)</li>
						  <li>Use tabs for indenting. Each file should start at level 0 (i.e. no indentation).</li>
						  <li>Functions should use a DocBlock-style comment.</li>
						  <li>Operators (<code class="language-plaintext highlighter-rouge">=</code>, <code class="language-plaintext highlighter-rouge">+</code>, <code class="language-plaintext highlighter-rouge">=&gt;</code> etc) should have a space either side.</li>
						  <li>Control structure keywords (<code class="language-plaintext highlighter-rouge">if</code>, <code class="language-plaintext highlighter-rouge">else</code>, <code class="language-plaintext highlighter-rouge">foreach</code> etc) should have a space between them and the opening parenthesis.</li>
						  <li>Opening braces for classes and functions should be on the next line.</li>
						  <li>Opening braces for control structures should be on the same line. All control structures should use braces.</li>
						</ul>

						<p>If in doubt, follow the style of the surrounding code. The Q2A repository includes a set of rules in the test directory for use with <a href="https://github.com/squizlabs/PHP_CodeSniffer">PHP CodeSniffer</a> (PHPCS) which checks several aspects of the coding style (some are currently omitted as we migrate the old style to new). It can be run using this command from the repository root:</p>

						<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>php /path/to/phpcs.phar --report=emacs --extensions=php --standard=qa-tests/phpcs/ruleset.xml .
						</code></pre></div></div>

						<p>If nothing comes up, the coding style is good to go!</p>

						<h3 id="examples">Examples</h3>

						<p>Here is an example of the coding style.</p>

						<div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">foreach</span> <span class="p">(</span><span class="nv">$thingList</span> <span class="k">as</span> <span class="nv">$thing</span><span class="p">)</span> <span class="p">{</span>
							<span class="k">if</span> <span class="p">(</span><span class="k">isset</span><span class="p">(</span><span class="nv">$thing</span><span class="p">[</span><span class="s1">'id'</span><span class="p">]))</span> <span class="p">{</span>
								<span class="k">if</span> <span class="p">(</span><span class="nb">strpos</span><span class="p">(</span><span class="nv">$thing</span><span class="p">[</span><span class="s1">'id'</span><span class="p">],</span> <span class="s1">'Hello'</span><span class="p">)</span> <span class="o">===</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
									<span class="nv">$newThing</span> <span class="o">=</span> <span class="s1">'Goodbye'</span><span class="p">;</span>
								<span class="p">}</span> <span class="k">elseif</span> <span class="p">(</span><span class="nv">$thing</span><span class="p">[</span><span class="s1">'id'</span><span class="p">]</span> <span class="o">===</span> <span class="s1">'World'</span><span class="p">)</span> <span class="p">{</span>
									<span class="nv">$newerThing</span> <span class="o">=</span> <span class="s1">'Galaxy'</span><span class="p">;</span>
								<span class="p">}</span>
							<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
								<span class="k">return</span> <span class="kc">null</span><span class="p">;</span>
							<span class="p">}</span>
						<span class="p">}</span>
						</code></pre></div></div>

						<p>Here is a class example showing the placement of braces, operators, and a DocBlock comment.</p>

						<div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">class</span> <span class="nc">ExampleThing</span>
						<span class="p">{</span>
							<span class="cd">/**
							 * Adds 1 to the supplied number.
							 * @param int $number The number to increment.
							 * @return int Returns the new number.
							 */</span>
							<span class="k">public</span> <span class="k">function</span> <span class="n">addOne</span><span class="p">(</span><span class="nv">$number</span><span class="p">)</span>
							<span class="p">{</span>
								<span class="nv">$result</span> <span class="o">=</span> <span class="nv">$number</span> <span class="o">+</span> <span class="mi">1</span><span class="p">;</span>

								<span class="k">return</span> <span class="nv">$result</span><span class="p">;</span>
							<span class="p">}</span>
						<span class="p">}</span>
						</code></pre></div></div>

						<h2 id="new-autoloaded-classes">New autoloaded classes</h2>

						<p>From version 1.9 namespaces are being used for new code, following the <a href="https://www.php-fig.org/psr/psr-4/">PSR-4</a> standard. This allows classes to be ‘auto-loaded’ without needing to use <code class="language-plaintext highlighter-rouge">require_once</code> everywhere. This is being done slowly and carefully to maintain backwards compatibility, and does not apply to plugins, themes, nor most of the core for that matter.</p>

						<p>Namespaced classes live in the <code class="language-plaintext highlighter-rouge">qa-src</code> directory, with each sub-directory coresponding to a sub-namespace. For example, the file <code class="language-plaintext highlighter-rouge">qa-src/Storage/FileCacheDriver.php</code> is in the namespace <code class="language-plaintext highlighter-rouge">\Q2A\Storage</code>; the class can be loaded with <code class="language-plaintext highlighter-rouge">\Q2A\Storage\FileCacheDriver</code>.</p>

						<p>Q2A versions 1.7-1.8 used the old PSR-0 standard, with classes in the <code class="language-plaintext highlighter-rouge">qa-include/Q2A</code> directory. Classes are mapped to PHP files with the underscores converted to directory separators. So for example the <code class="language-plaintext highlighter-rouge">Q2A_Util_Debug</code> class is in the file <code class="language-plaintext highlighter-rouge">qa-include/Q2A/Util/Debug.php</code>.</p>
					</div>
				</article>
			</div>
			
			<div class="sidebar">
				<ul class="docs-nav">
					<!-- Will Populate -->
				</ul>
			</div>
			
		</div>
	</section>
	
	<div class="jump-top-container">
		<div id="jump-top" class="jump-top"><span class="material-icons">arrow_upward</span></div>
	</div>
	
	<footer class="footer">
		<nav class="footer-nav">
			<ul class="footer-main-nav">
				<li>
					<a href="https://www.question2answer.org/" class="footer-site-logo">
						<img src="../../images/branding/question2answer-logo-350x40.png">
					</a>
				</li>
				<li><a href="https://www.question2answer.org/feedback.php">Send feedback</a></li>
				<li><a href="https://www.question2answer.org/versions.php">Version history</a></li>
				<li><a href="https://www.question2answer.org/license.php">License details</a></li>
				<li><a href="http://demo.question2answer.org/">Demo sandbox</a></li>
			</ul>
			<div class="footer-credits-nav">
				Created by <a href="http://www.gidgreen.com">Gideon Greenspan</a> and <a href="https://github.com/q2a/question2answer/graphs/contributors">Contributors</a>.
			</div>
		</nav>
	</footer>

	<!-- Javascript main files -->
	<script src="../../js/sticky_bar.js"></script>
	<script src="../../js/main.js"></script>
	<script src="../../js/highlight.js"></script>
	<script>hljs.initHighlightingOnLoad();</script>
  
	<!-- Scripts rom Q2A Docs - Classic version -->
	<script type="text/javascript" async="" src="https://www.google-analytics.com/analytics.js"></script>
	<script type="text/javascript" async="" src="https://www.googletagmanager.com/gtag/js?id=UA-1165533-8&amp;l=dataLayer&amp;cx=c">
	</script><script type="text/javascript" async="" src="https://www.google-analytics.com/analytics.js">
	</script><script async="" src="https://www.googletagmanager.com/gtag/js?id=UA-1974891-11"></script>
	<script>
		window.dataLayer = window.dataLayer || [];
		function gtag(){dataLayer.push(arguments);}
		gtag('js', new Date());

		gtag('config', 'UA-1974891-11');
		gtag('config', 'UA-1165533-8'); // old tracking ID
	</script>

</body>

</html>